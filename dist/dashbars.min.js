!function(n,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():n.Dashbars=n.Dashbars||r()}(this,function(){var n=function(){return"undefined"==typeof window?require("moment"):window.moment},r=function(r){r("d-iso",function(r){return n()(r).toISOString()}),r("d-format",function(r,t){return n()(t).format(r)}),r("d-now",function(){return new Date}),r("d-parse",function(r,t){return n()(t,r).toDate()}),r("d-add",function(r,t,e){return n()(e).add(r,t).toDate()}),r("d-subtract",function(r,t,e){return n()(e).subtract(r,t).toDate()})},t=function(n,r){n("-map",function(n,t){return t.map(r(n))}),n("-sort",function(n,t,e){return n.slice().sort(e&&r(t))}),n("-take",function(n,r){return r.slice(0,n)}),n("-drop",function(n,r){return r.slice(n)}),n("-take-while",function(n,t){return f().filter(t,r(n))}),n("-drop-while",function(n,t){return f().drop(t,r(n))}),n("-slice",function(n,r,t,e){return n.slice(t&&r,e&&t)}),n("-flatten",function(){return f().flatten(Array.prototype.slice.call(arguments,0,-1))}),n("-array",function(){return Array.prototype.slice.call(arguments,0,-1)}),n("-range",function(n,r,t,e){return f().range(r&&n,t&&r,e&&t)}),n("-object",function(n){return JSON.parse(n)}),n("-size",function(n){return n.length}),n("-find",function(n,t){return f().find(t,r(n).bind(this))}),n("-reduce",function(n,t,e){return e.reduce(r(n),t)}),n("-first",function(n){return f().first(n)}),n("-last",function(n){return f().last(n)}),n("-join",function(n,r,t){return n.join(t?r:"")}),n("-sum",function(n){return n.reduce(function(n,r){return n+r},0)}),n("-product",function(n){return n.reduce(function(n,r){return n*r},1)}),n("-min",function(n){return n.reduce(function(n,r){return r>n?n:r},Number.MAX_VALUE)}),n("-max",function(n){return n.reduce(function(n,r){return n>r?n:r},Number.MIN_VALUE)}),n("-group-by",function(n,t){var e=this;return t.reduce(function(t,u){var i=r(n).call(e,u);return t[i]?t[i].push(u):t[i]=[u],t},{})}),n("-grouped",function(n,r){return f().range(0,r.length,n).map(function(t){return r.slice(t,t+n)})}),n("-every?",function(n,t){return t.every(r(n))}),n("-some?",function(n,t){return t.some(r(n))}),n("-none?",function(n,t){return!t.some(r(n))}),n("-contain?",function(n,r){return r.some(function(r){return r===n})}),n("-union",function(){return f().union.apply(f(),Array.prototype.slice.call(arguments,0,-1))}),n("-difference",function(){return f().difference.apply(f(),Array.prototype.slice.call(arguments,0,-1))}),n("-intersection",function(){return f().intersection.apply(f(),Array.prototype.slice.call(arguments,0,-1))}),n("-distinct",function(n){return f().unique(n)}),n("-get",function(n,r){return r[n]}),n("-keys",function(n){return Object.keys(n)}),n("-values",function(n){return Object.keys(n).map(function(r){return n[r]})}),n("-json",function(n){return JSON.stringify(n)}),n("-call",function(){var n=arguments[0],r=Array.prototype.slice.call(arguments,1,-1);return n.apply(this,r)}),n("-as-is",function(n){return n}),n("-partial",function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1,-1),e=this;return function(){for(var u=t.slice(),i=0,o=0;o<u.length||i<arguments.length;o++)void 0===u[o]&&(u[o]=arguments[i++]);return r(n).apply(e,u)}}),n("-let",function(n,r){this[n]=r}),n("-log",function(){console.log.call(this,Array.prototype.slice.call(arguments,1,-1))})},e=function(n){return f().isFunction(n)?n:this._helpable.helper(n)||function(){throw Error("not found the helper:"+n)}},u={registerHelper:function(n,r){return n=n,r=r,this},helper:function(n){return n=n,function(){}}},i=function(n){return{registerHelper:function(r,t){return n.registerHelper(r,t),this},helper:function(r){return n.helpers[r]}}},o=function(n){var r=this;return this._helpable=i(n),this._registerers.forEach(function(n){n(r._helpable.registerHelper,r.helper,r.predicate)}),this},c=function(n){var r=this._registerers;return n._registerers.forEach(function(n){r.push(n)}),this},s=function(){var n=f().flatten(Array.prototype.slice.call(arguments)),r={_registerers:f().isEmpty(this._registerers)?[]:this._registerers,_helpable:u};return n.forEach(function(n){r._registerers.push(n)}),r.help=o.bind(r),r.helper=e.bind(r),r.create=s.bind(r),r.extend=c.bind(r),r},f=function(){return"undefined"==typeof window?require("lodash"):window._},a=function(n){n("n-even?",function(n){return n%2===0}),n("n-add",function(n,r){return n+r}),n("n-subtract",function(n,r){return n-r}),n("n-multiply",function(n,r){return n*r}),n("n-devide",function(n,r){return n/r})},l=function(n){return!!n},p=function(n){n("-is?",l),n("-and?",function(){return Array.prototype.slice.call(arguments,0,-1).every(l)}),n("-or?",function(){return Array.prototype.slice.call(arguments,0,-1).some(l)}),n("-not?",function(n){return!n}),n("-gt?",function(n,r){return n>r}),n("-lt?",function(n,r){return r>n}),n("-ge?",function(n,r){return n>=r}),n("-le?",function(n,r){return r>=n}),n("-ne?",function(n,r){return n!==r}),n("-equal?",function(n,r){return n===r}),n("-deep-equal?",function(n,r){return f().isEqual(n,r)}),n("-in?",function(n,r){return n in r}),n("-of?",function(n,r){return Object.prototype.hasOwnProperty.call(r,n)}),n("-empty?",function(n){return f().isEmpty(n)}),n("-not-empty?",function(n){return!f().isEmpty(n)}),n("-string?",function(n){return f().isString(n)}),n("-array?",function(n){return f().isArray(n)})},d=function(n){n("s-size",function(n){return n.length}),n("s-trim",function(n){return n.trim()}),n("s-take",function(n,r){return r.slice(0,n)}),n("s-drop",function(n,r){return r.slice(n)}),n("s-repeat",function(n,r){return new Array(n+1).join(r)}),n("s-concat",function(){return Array.prototype.slice.call(arguments,0,-1).join("")}),n("s-split",function(n,r){return r.split(n)}),n("s-slice",function(n,r,t,e){return n.slice(t&&r,e&&t)}),n("s-reverse",function(n){return n.split("").reverse().join("")}),n("s-replace",function(n,r,t,e,u){return t.replace(new RegExp(n,u&&e),r)}),n("s-match",function(n,r,t,e){return r.match(new RegExp(n,e&&t))}),n("s-lowercase",function(n){return n.toLowerCase()}),n("s-uppercase",function(n){return n.toUpperCase()}),n("s-lowercase?",function(n){return n.toLowerCase()===n}),n("s-uppercase?",function(n){return n.toUpperCase()===n}),n("s-match?",function(n,r,t,e){return new RegExp(n,e&&t).test(r)}),n("s-contain?",function(n,r,t){return n=t?n.toLowerCase():n,r=t?r.toLowerCase():r,r.indexOf(n)>=0}),n("s-start-with?",function(n,r,t){return n=t?n.toLowerCase():n,r=t?r.toLowerCase():r,0===r.indexOf(n)}),n("s-end-with?",function(n,r,t){return n=t?n.toLowerCase():n,r=t?r.toLowerCase():r,r.lastIndexOf(n)===r.length-n.length})};return s(t,p,d,a,r)});